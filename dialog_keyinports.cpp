#include "dialog_keyinports.h"
#include "ui_dialog_keyinports.h"

Dialog_KeyInPorts::Dialog_KeyInPorts(QWidget *parent) :
    QDialog(parent),
    ui(new Ui::Dialog_KeyInPorts)
{
    ui->setupUi(this);
    setWindowFlags(Qt::FramelessWindowHint | Qt::WindowMinimizeButtonHint);
    // 设置输入端口的范围
    _p_validator = new QIntValidator(1,65535, this);
    ui->lineEdit_begin->setValidator(_p_validator);
    ui->lineEdit_end->setValidator(_p_validator);
}

Dialog_KeyInPorts::~Dialog_KeyInPorts()
{
    delete ui;
}

void Dialog_KeyInPorts::on_buttonBox_accepted()
{
    qDebug() << "click ok";
    QString sf = ui->lineEdit_begin->text();
    QString sdsd = ui->lineEdit_end->text();
    qDebug() << sf << "  " << sdsd;
    bool isOK1;
    bool isOK2;
    _ports_begin = ui->lineEdit_begin->text().toInt(&isOK1);
    _ports_end = ui->lineEdit_end->text().toInt(&isOK2);
    if (isOK1 && isOK2 && _ports_begin > 0 && _ports_begin <= 65535 && _ports_end > 0 && _ports_end <= 65535){}
    else
    {
        NISOQBOX("输入错误", "端口输入错误.端口范围:1-65535")
    }
    _ports_begin = 0;
    _ports_end = 0;
}
